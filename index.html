
<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF--8" />
    <link rel="icon" type="https://www2.0zz0.com/2025/11/02/21/746604539.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>مطعم السماك</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
      html {
        scroll-behavior: smooth;
      }
      body {
        font-family: 'Cairo', sans-serif;
        background-color: #f0f9ff;
        background-image: url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='%23dbeafe'%3E%3Cpath d='M80 40c0 22.09-17.91 40-40 40S0 62.09 0 40 17.91 0 40 0s40 17.91 40 40zM40 80c22.09 0 40-17.91 40-40S62.09 0 40 0 0 17.91 0 40s17.91 40 40 40z'/%3E%3C/g%3E%3C/svg%3E");
      }
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #555;
      }
      .hidden {
        display: none;
      }
      .cart-pop {
        animation: pop 0.3s ease-out;
      }
      @keyframes pop {
        0% { transform: scale(1); }
        50% { transform: scale(1.25); }
        100% { transform: scale(1); }
      }
      .active-category {
        background-color: #2563eb !important; /* blue-600 */
        border-color: #1d4ed8 !important; /* blue-800 */
        transform: translateY(-2px);
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      }
      .active-category h3 {
          color: white !important;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.22.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "gifenc": "https://aistudiocdn.com/gifenc@^1.0.3"
  }
}
</script>
</head>
  <body class="bg-blue-50 text-gray-800">
    <!-- Header -->
    <header id="main-header" class="bg-white pb-4 shadow-sm sticky top-0 z-20">
        <!-- Cover Photo Area -->
        <img class="w-full h-28 sm:h-40 object-cover" src="https://www2.0zz0.com/2025/10/04/17/563551754.jpg">
        
        <!-- Profile & Name Area -->
        <div class="container mx-auto px-4">
            <div class="relative -mt-12 sm:-mt-16 flex flex-col sm:flex-row items-center">
                <!-- Logo -->
                <div class="relative flex-shrink-0">
                    <img class="w-24 h-24 sm:w-32 sm:h-32 rounded-full border-4 border-white bg-white shadow-lg object-cover p-2" 
                         src="https://www2.0zz0.com/2025/10/04/16/131010794.jpg" 
                         alt="شعار مطعم السماك">
                </div>

                <!-- Name and Slogan -->
                <div class="mt-4 sm:mt-0 sm:mr-6 text-center sm:text-right w-full">
                    <h1 class="text-2xl sm:text-3xl font-bold text-gray-800">مطعم السماك</h1>
                    <p class="text-gray-500 mt-1 text-sm sm:text-base">لأشهى المأكولات البحرية الطازجة</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Browse Categories Section -->
    <section id="browse-categories" class="bg-transparent py-8 px-4">
      <div class="container mx-auto">
        <h2 class="text-3xl font-bold text-center text-blue-800 mb-6">تصفح الأقسام</h2>
        <div id="category-cards-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-4">
          <!-- Category cards will be generated by JavaScript -->
        </div>
      </div>
    </section>

    <!-- Best Dishes Section -->
    <section id="best-dishes" class="bg-transparent py-8 px-4 mt-4">
      <div class="container mx-auto">
        <h2 class="text-3xl font-bold text-center text-blue-800 mb-6">أفضل الأطباق</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <!-- Card 1: طاجن سي فود -->
          <div class="bg-white border rounded-lg p-4 text-center shadow-lg transform hover:scale-105 transition-transform duration-300 flex flex-col items-center">
            <img src="https://www2.0zz0.com/2025/10/04/22/796361061.jpg" alt="طاجن سي فود" class="w-full h-40 object-cover rounded-md mx-auto mb-4">
            <h3 class="text-xl font-bold">طاجن سي فود بالكريمة</h3>
            <p class="text-gray-600 my-2 flex-grow">طاجن ثمار البحر بالصوص الأبيض في الفرن.</p>
          </div>
          <!-- Card 2: شوربة سي فود -->
          <div class="bg-white border rounded-lg p-4 text-center shadow-lg transform hover:scale-105 transition-transform duration-300 flex flex-col items-center">
            <img src="https://www2.0zz0.com/2025/10/04/22/628997545.jpg" alt="شوربة سي فود" class="w-full h-40 object-cover rounded-md mx-auto mb-4">
            <h3 class="text-xl font-bold">شوربة سي فود</h3>
            <p class="text-gray-600 my-2 flex-grow">مزيج غني من ثمار البحر الطازجة بالكريمة.</p>
          </div>
          <!-- Card 3: سمك دنيس -->
          <div class="bg-white border rounded-lg p-4 text-center shadow-lg transform hover:scale-105 transition-transform duration-300 flex flex-col items-center">
            <img src="https://www2.0zz0.com/2025/10/04/22/289388452.jpg" alt="سمك دنيس" class="w-full h-40 object-cover rounded-md mx-auto mb-4">
            <h3 class="text-xl font-bold">سمك دنيس</h3>
            <p class="text-gray-600 my-2 flex-grow">سمك دنيس طازج (السعر للكيلو).</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Menu -->
    <main id="menu-container" class="container mx-auto p-4">
      <!-- Menu content will be generated by JavaScript -->
    </main>

    <!-- Cooking Methods Section -->
    <section id="cooking-methods" class="container mx-auto px-4 mt-8">
      <div class="bg-white rounded-lg shadow-lg p-6 border-t-4 border-blue-500">
        <h2 class="text-2xl font-bold text-blue-800 mb-6 text-center">طرق الطهي المتاحة للأسماك</h2>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 text-center text-gray-800 font-semibold">
          <div class="p-3 bg-gray-100 rounded-lg shadow-sm">مشوي ردة</div>
          <div class="p-3 bg-gray-100 rounded-lg shadow-sm">مشوي على الفحم</div>
          <div class="p-3 bg-gray-100 rounded-lg shadow-sm">زيت وليمون</div>
          <div class="p-3 bg-gray-100 rounded-lg shadow-sm">مقلي</div>
          <div class="p-3 bg-gray-100 rounded-lg shadow-sm">سنجاري</div>
          <div class="p-3 bg-gray-100 rounded-lg shadow-sm">صواني</div>
          <div class="p-3 bg-gray-100 rounded-lg shadow-sm">دواجن</div>
          <div class="p-3 bg-gray-100 rounded-lg shadow-sm">صوص أبيض أو أحمر</div>
        </div>
        <p class="text-center text-gray-700 mt-6 pt-4 border-t border-gray-200 border-dashed">* سعر الكيلو لا يشمل السلطات والعيش.</p>
      </div>
    </section>

    <!-- Phosphorates Section -->
    <section id="phosphorates-section" class="container mx-auto px-4 mt-8">
      <div class="bg-white rounded-lg shadow-lg p-6 border-t-4 border-blue-500">
        <h2 class="text-2xl font-bold text-blue-800 mb-4 text-center">الفوسفوريات</h2>
        <p class="text-center text-gray-600 mb-6">اختر ما تفضله من الأصناف التالية واستمتع به مع طريقة الطهي التي تحبها.</p>
        <h3 class="text-xl font-semibold text-gray-700 mb-3 text-center">الأصناف المتاحة</h3>
        <div class="flex flex-wrap justify-center gap-3 text-center text-gray-800 font-semibold mb-6">
          <div class="py-2 px-4 bg-blue-100 text-blue-800 rounded-full shadow-sm">جمبرى</div>
          <div class="py-2 px-4 bg-blue-100 text-blue-800 rounded-full shadow-sm">كابوريا</div>
          <div class="py-2 px-4 bg-blue-100 text-blue-800 rounded-full shadow-sm">جندوفلى</div>
          <div class="py-2 px-4 bg-blue-100 text-blue-800 rounded-full shadow-sm">فيلية</div>
          <div class="py-2 px-4 bg-blue-100 text-blue-800 rounded-full shadow-sm">سبيط</div>
        </div>
        <h3 class="text-xl font-semibold text-gray-700 mb-4 text-center border-t border-gray-200 pt-6">طرق الطهي</h3>
        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 text-center text-gray-800 font-semibold">
          <div class="p-3 bg-gray-100 rounded-lg shadow-sm">مشوى جريل</div>
          <div class="p-3 bg-gray-100 rounded-lg shadow-sm">خلطة</div>
          <div class="p-3 bg-gray-100 rounded-lg shadow-sm">إسكندرانى</div>
          <div class="p-3 bg-gray-100 rounded-lg shadow-sm">بترفلاى</div>
          <div class="p-3 bg-gray-100 rounded-lg shadow-sm">مسلوق بالشوربة</div>
          <div class="p-3 bg-gray-100 rounded-lg shadow-sm">مشوى زبدة</div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-blue-800 text-white p-6 mt-12">
      <div class="container mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 text-center md:text-right">
        <div>
          <h3 class="text-xl font-bold mb-2">العنوان</h3>
          <p>شارع المأكولات البحرية، مدينة نصر، القاهرة</p>
        </div>
        <div>
          <h3 class="text-xl font-bold mb-2">للتواصل والطلبات</h3>
          <p>رقم الدليفري: <a href="tel:+201030566078" class="hover:underline">01030566078</a></p>
          <p>أرقام أخرى: <a href="tel:+201030566078" class="hover:underline">01030566078</a></p>
        </div>
        <div>
          <h3 class="text-xl font-bold mb-2">تابعنا</h3>
          <div class="flex justify-center md:justify-start gap-4 mt-2">
            <a href="https://wa.me/201030566078" target="_blank" class="hover:opacity-80">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.487 5.235 3.487 8.413 0 6.557-5.338 11.892-11.894 11.892-1.99 0-3.903-.52-5.586-1.457l-6.354 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.886-.001 2.267.655 4.398 1.908 6.161l-.477 1.744 1.805-.473z"/></svg>
            </a>
            <a href="https://facebook.com" target="_blank" class="hover:opacity-80">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v2.385z"/></svg>
            </a>
          </div>
        </div>
      </div>
    </footer>


    <!-- Floating Cart Button -->
    <button id="floating-cart-button" class="fixed bottom-6 left-6 bg-blue-600 text-white rounded-full shadow-lg w-16 h-16 flex items-center justify-center z-20 hover:bg-blue-700 transition-transform transform hover:scale-110">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
      </svg>
      <span id="cart-item-count" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center border-2 border-blue-600 hidden">
        0
      </span>
    </button>
    
    <!-- Scroll to Top Button -->
    <button id="scroll-to-top-btn" class="hidden fixed bottom-6 right-6 bg-blue-600 text-white rounded-full shadow-lg w-14 h-14 flex items-center justify-center z-20 hover:bg-blue-700 transition-opacity duration-300">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
      </svg>
    </button>

    <!-- Cart Sidebar -->
    <div id="cart-sidebar" class="fixed inset-0 bg-black/60 z-30 flex justify-end hidden">
      <div id="cart-sidebar-content" class="w-full max-w-md bg-white h-full flex flex-col shadow-2xl">
        <header class="p-4 bg-gray-100 border-b flex justify-between items-center">
          <h2 class="text-2xl font-bold text-gray-800">سلة التسوق</h2>
          <button id="cart-close-button" class="text-gray-600 hover:text-gray-900 text-2xl">&times;</button>
        </header>
        <div id="cart-items-container" class="flex-grow overflow-y-auto p-4">
          <!-- Cart items will be generated by JavaScript -->
        </div>
        <footer class="p-4 bg-gray-100 border-t space-y-3">
            <div class="flex justify-between items-center text-gray-700">
                <span>المجموع الفرعي</span>
                <span id="cart-subtotal">0.00 جنيه</span>
            </div>
            <div class="flex justify-between items-center text-gray-700">
                <span>رسوم التوصيل</span>
                <span id="cart-delivery-fee">0.00 جنيه</span>
            </div>
            <div class="border-t pt-3 mt-3 flex justify-between items-center">
                <span class="text-lg font-bold">الإجمالي</span>
                <span id="cart-total" class="text-xl font-bold text-blue-700">0.00 جنيه</span>
            </div>
            <button id="checkout-button" class="w-full bg-green-600 text-white font-bold py-3 rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed">
            اتمام عملية الشراء
            </button>
        </footer>
      </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkout-modal" class="fixed inset-0 bg-black/60 z-40 flex items-center justify-center p-4 hidden">
      <div class="bg-white rounded-lg p-6 w-full max-w-md shadow-2xl">
        <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">تفاصيل التوصيل</h2>
        <form id="checkout-form" noValidate>
          <div class="mb-4">
            <label for="name" class="block text-gray-700 mb-1">الاسم الكامل*</label>
            <input type="text" id="name" class="w-full p-2 border rounded border-gray-300" required />
            <p class="text-red-500 text-sm mt-1 hidden">الاسم مطلوب</p>
          </div>
          <div class="mb-4">
            <label for="phone" class="block text-gray-700 mb-1">رقم التواصل*</label>
            <input type="tel" id="phone" class="w-full p-2 border rounded border-gray-300" required />
            <p class="text-red-500 text-sm mt-1 hidden">رقم التواصل مطلوب</p>
          </div>
          <div class="mb-4">
            <label for="building" class="block text-gray-700 mb-1">رقم العمارة / الشقة*</label>
            <input type="text" id="building" class="w-full p-2 border rounded border-gray-300" required />
            <p class="text-red-500 text-sm mt-1 hidden">رقم العمارة مطلوب</p>
          </div>
          <div class="mb-4">
            <label for="landmark" class="block text-gray-700 mb-1">علامة مميزة (اختياري)</label>
            <input type="text" id="landmark" class="w-full p-2 border border-gray-300 rounded" />
          </div>
          <div class="mb-6">
            <label for="delivery-time" class="block text-gray-700 mb-1">ميعاد التوصيل (اختياري)</label>
            <input type="text" id="delivery-time" class="w-full p-2 border border-gray-300 rounded" placeholder="مثال: الآن، أو الساعة 5 مساءً" />
          </div>
          <div class="flex justify-end gap-4">
            <button type="button" id="checkout-cancel-button" class="px-6 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">إلغاء</button>
            <button type="submit" class="px-6 py-2 text-white bg-green-600 rounded-lg hover:bg-green-700">إرسال الطلب عبر واتساب</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Order Confirmation Modal -->
    <div id="confirmation-modal" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 hidden">
      <div class="bg-white rounded-lg p-8 w-full max-w-sm text-center shadow-2xl">
        <div class="mx-auto bg-green-100 rounded-full h-16 w-16 flex items-center justify-center mb-4">
            <svg class="h-10 w-10 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
        </div>
        <h2 class="text-2xl font-bold text-gray-800 mb-2">تم إرسال طلبك!</h2>
        <p class="text-gray-600 mb-6">سيتم تحويلك إلى واتساب لإكمال الطلب. شكرًا لك!</p>
        <button id="confirmation-close-button" class="w-full px-6 py-2 text-white bg-green-600 rounded-lg hover:bg-green-700">حسنًا</button>
      </div>
    </div>
    
    <!-- Item Details Modal -->
    <div id="details-modal" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 hidden">
      <div class="bg-white rounded-lg p-6 w-full max-w-lg shadow-2xl relative max-h-[90vh] flex flex-col sm:flex-row gap-6">
        <button id="details-close-button" class="absolute -top-2 -right-2 text-white bg-gray-700 rounded-full w-8 h-8 flex items-center justify-center text-2xl hover:bg-gray-900 z-10">&times;</button>
        <img id="details-modal-image" src="" alt="" class="w-full sm:w-1/2 h-auto object-cover rounded-md bg-gray-200">
        <div class="flex flex-col">
          <h2 id="details-modal-title" class="text-3xl font-bold text-gray-800 mb-2"></h2>
          <p id="details-modal-description" class="text-gray-600 mb-4 flex-grow"></p>
          <div class="border-t pt-4">
            <h3 class="text-lg font-semibold mb-2">الأسعار:</h3>
            <div id="details-modal-prices" class="space-y-1 text-lg">
                <!-- Prices will be injected here -->
            </div>
          </div>
        </div>
      </div>
    </div>


    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // --- DATA and STATE ---
        const menuData = [
          {
            title: 'الشوربة',
            items: [
              { id: 1, name: 'شوربة سي فود', description: 'مزيج غني من ثمار البحر الطازجة بالكريمة.', price: { medium: 120 }, image: 'https://www.chefmarket.ru/blog/wp-content/uploads/2021/08/a-steaming-hot-bowl--e1629553739570.jpg' },
              { id: 2, name: 'شوربة سى فود مخلية', description: 'شوربة كريمية مع قطع الجمبري الشهية.', price: { medium: 150 }, image: 'https://www.chefmarket.ru/blog/wp-content/uploads/2021/08/a-steaming-hot-bowl--e1629553739570.jpg' },
              { id: 3, name: 'شوربة جمبرى', description: 'شوربة كريمية مع قطع الجمبري ريد صوص.', price: { medium: 100 }, image: 'https://avatars.mds.yandex.net/get-altay/9833544/2a0000018f66fde7ce5ed4e4fb4c96a8ec23/XXXL' },
              { id: 4, name: 'شوربة السماك', description: 'شوربة كريمية مع قطع الجمبري الشهية.', price: { medium: 220, large: 250 }, image: 'https://azyya.com/wp-content/uploads/00211.jpg' },

            ],
          },
          {
            title: 'الأطباق',
            items: [
              { id: 5, name: 'أرز سادة', description: 'أرز بسمتي مبهر على طريقة الصيادية التقليدية.', price: { medium: 25, large: 35 }, image: 'https://gandofly.ae/wp-content/uploads/2023/06/Sayadiyah-Rice.webp' },
              { id: 6, name: 'أرز بالجمبري', description: 'أرز بسمتي مع قطع الجمبري والخضروات.', price: { medium: 100, large: 120 }, image: 'https://www.gourmandize.com/uploads/media/img_5501.jpg?1383323202' },
              { id: 7, name: 'أرز سى فود', description: 'أرز بسمتي مع سى فود.', price: { medium: 150, large: 180 }, image: 'https://i.pinimg.com/474x/fa/f5/71/faf571a5ae5406e60c75d886e16681b2.jpg' },

            ],
          },
          {
            title: 'السندويتشات',
            items: [
              { id: 8, name: 'ساندوتش جمبري بلدى', description: 'حبات جمبري بلدي طازجة ومُقشرة، متبلة بخلطة إسكندرانية حارة غنية بالثوم والكمون والليمون.', price: { medium: 60 }, image: 'https://www2.0zz0.com/2025/10/04/19/301886214.jpg' },
              { id: 9, name: 'ساندوتش سبيط بلدى', description: 'حلقات سبيط بلدي طازج ومتبّل، مُقلاة بالزيت الساخن حتى تصبح ذهبية ومُقرمشة.', price: { medium: 60 }, image: 'https://www2.0zz0.com/2025/10/04/19/817454140.jpg' },
              { id: 10, name: 'ساندوتش فيليه', description: 'قطعة سخية من فيليه السمك الأبيض الطري، مغطاة بطبقة خارجية ذهبية ومقرمشة.', price: { medium: 50 }, image: 'https://www2.0zz0.com/2025/10/04/19/824667060.jpg' },
              { id: 11, name: 'ساندوتش ميكس', description: 'مزيج ساحر من المأكولات البحرية المقلية.', price: { medium: 70 }, image: 'https://www2.0zz0.com/2025/10/04/19/162352674.jpg' },
            ],
          },
          {
            title: 'الاضافات',
            items: [
              { id: 12, name: 'سلطة طحينة', description: 'صلصة طحينة فاخرة بقوام مخملي. نُضيف إليها لمسة من الكمون والفلفل الأسود ورشة من البابريكا المدخنة.', price: { medium: 10 }, image: 'https://www2.0zz0.com/2025/10/04/20/131504977.jpg' },
              { id: 13, name: 'سلطة خضراء', description: 'باقة من أجود الخضروات الموسمية الطازجة (خس، خيار، طماطم). نتبلها بصوص الليمون والثوم الخاص بنا.', price: { medium: 10 }, image: 'https://www2.0zz0.com/2025/10/04/20/977192323.jpg' },
              { id: 14, name: 'بابا غنوج', description: 'مزيج منعش من الباذنجان المشوي بقطع خشنة، متبّل بعناية مع قطع صغيرة من الفلفل الرومي الملون.', price: { medium: 10 }, image: 'https://www2.0zz0.com/2025/10/04/20/373620573.jpg' },
              { id: 15, name: 'باذنجان', description: 'طبق تراثي غني ودافئ. طبقات من الباذنجان المقلي الذهبي', price: { medium: 10 }, image: 'https://www2.0zz0.com/2025/10/04/20/752922452.jpg' },
              { id: 16, name: 'طماطم متبلة', description: 'شرائح سميكة من الطماطم الحمراء الطازجة، مغمورة بتتبيلة عربية كلاسيكية: ثوم مهروس، عصير الليمون الطبيعي', price: { medium: 10 }, image: 'https://www2.0zz0.com/2025/10/04/20/334584325.jpg' },
              { id: 17, name: 'خيار مخلل', description: 'خيار طازج تم تخليله بعناية فائقة على الطريقة التقليدية، يتميز بقوام مقرمش ونكهة حامضة ممتازة ومثالية.', price: { medium: 10 }, image: 'https://www2.0zz0.com/2025/10/04/20/431047226.jpg' },
            ],
          },
          {
            title: 'الطواجن',
            items: [
              { id: 18, name: 'طاجن مكرونة سى فود', description: 'ريد صوص أو وايت صوص بالكريمة.', price: { medium: 200, large: 250 }, image: 'https://www2.0zz0.com/2025/10/04/20/630918121.jpg' },
              { id: 19, name: 'طاجن مكرونة بالجمبرى', description: 'ريد صوص أو وايت صوص بالكريمة.', price: { medium: 150, large: 200 }, image: 'https://www2.0zz0.com/2025/10/04/20/981391890.jpg' },
              { id: 20, name: 'طاجن ملوخية بالجمبرى', description: 'طاجن جمبري بالصلصة الحمراء.', price: { medium: 100, large: 120 }, image: 'https://www2.0zz0.com/2025/10/04/20/251576486.jpg' },
              { id: 21, name: 'طاجن سى فود ميكس', description: 'ريد صوص أو وايت صوص.', price: { medium: 220 }, image: 'https://www2.0zz0.com/2025/10/04/20/927834398.jpg' },
              { id: 22, name: 'طاجن السماك', description: 'ريد صوص أو وايت صوص بالكريمة.', price: { medium: 250 }, image: 'https://www2.0zz0.com/2025/10/04/20/927834398.jpg' },
              { id: 23, name: 'طاجن سبيط', description: 'ريد صوص أو وايت صوص بالكريمة.', price: { medium: 200 }, image: 'https://www2.0zz0.com/2025/10/04/20/453594890.jpg' },
              { id: 24, name: 'طاجن جمبري', description: 'ريد صوص أو وايت صوص بالكريمة.', price: { medium: 200 }, image: 'https://www2.0zz0.com/2025/10/04/20/404056579.jpg' },
              { id: 25, name: 'طاجن فيلية', description: 'ريد صوص أو وايت صوص بالكريمة.', price: { medium: 130 }, image: 'https://www2.0zz0.com/2025/10/04/20/684102779.jpg' },
            ],
          },
          {
            title: 'الوجبات',
            items: [
              { id: 26, name: 'وجبة بلطى', description: 'أرز + سلطة خضراء + طحينة + خبز.', price: { medium: 100, large: 120 }, image: 'https://www2.0zz0.com/2025/10/04/21/960063870.jpg' },
              { id: 27, name: 'وجبة بورى', description: 'أرز + سلطة خضراء + طحينة + خبز.', price: { medium: 150, large: 180 }, image: 'https://www2.0zz0.com/2025/10/04/21/141156999.jpg' },
              { id: 28, name: 'وجبة ماكريل', description: 'أرز + سلطة خضراء + طحينة + خبز.', price: { medium: 140, large: 170 }, image: 'https://www2.0zz0.com/2025/10/04/21/802865874.jpg' },
              { id: 29, name: 'وجبة فيلية', description: 'أرز + سلطة خضراء + طحينة + خبز.', price: { medium: 110, large: 130 }, image: 'https://www2.0zz0.com/2025/10/04/21/400282678.jpg' },
              { id: 30, name: 'وجبة سبيط', description: 'ارز + سلطة خضراء + طحينة + خبز.', price: { medium: 170, large: 220 }, image: 'https://www2.0zz0.com/2025/10/04/21/150821105.jpg' },
              { id: 31, name: 'وجبة جمبرى مقلى - مشوى', description: 'أرز + سلطة خضراء + طحينة + خبز.', price: { medium: 170, large: 220 }, image: 'https://www2.0zz0.com/2025/10/04/21/367893388.jpg' },
              { id: 32, name: 'وجبة ميكس "فيلية سبيط جمبرى"', description: 'أرز + سلطة خضراء + طحينة + خبز.', price: { medium: 200, large: 250 }, image: 'https://www2.0zz0.com/2025/10/04/21/740580912.jpg' },
              { id: 33, name: 'وجبة السماك', description: 'سمكة بلطى + 1 شوربة سى فود + أو شورية جمبرى حمرة + أرز + سلطة خضراء + طحينة + خبز.', price: { medium: 200 }, image: 'https://www2.0zz0.com/2025/10/04/21/399811468.jpg' },
            ],
          },
          {
            title: 'الاسماك الطازجة',
            items: [
              { id: 34, name: 'اسماك طازجة', description: ' سعر الكيلو حسب سعر اليوم " بلطى - بورى - ماكريل - دنيس - لوت قاروس - مرجان - مكرونة سويسى - بربونى - نعابين - دراك - سلمون - فيلية بلطى .', price: {}, image: 'https://www2.0zz0.com/2025/10/04/22/326414240.jpg' },
            ],
          },
        ];
        let cart = [];
        const DELIVERY_FEE = 15;

        // --- DOM Elements ---
        const menuContainer = document.getElementById('menu-container');
        const floatingCartButton = document.getElementById('floating-cart-button');
        const cartItemCountSpan = document.getElementById('cart-item-count');
        const cartSidebar = document.getElementById('cart-sidebar');
        const cartCloseButton = document.getElementById('cart-close-button');
        const cartItemsContainer = document.getElementById('cart-items-container');
        const cartSubtotalSpan = document.getElementById('cart-subtotal');
        const cartDeliveryFeeSpan = document.getElementById('cart-delivery-fee');
        const cartTotalSpan = document.getElementById('cart-total');
        const checkoutButton = document.getElementById('checkout-button');
        const checkoutModal = document.getElementById('checkout-modal');
        const checkoutForm = document.getElementById('checkout-form');
        const checkoutCancelButton = document.getElementById('checkout-cancel-button');
        const confirmationModal = document.getElementById('confirmation-modal');
        const confirmationCloseButton = document.getElementById('confirmation-close-button');
        const detailsModal = document.getElementById('details-modal');
        const detailsCloseButton = document.getElementById('details-close-button');
        const detailsModalImage = document.getElementById('details-modal-image');
        const detailsModalTitle = document.getElementById('details-modal-title');
        const detailsModalDescription = document.getElementById('details-modal-description');
        const detailsModalPrices = document.getElementById('details-modal-prices');
        const categoryCardsContainer = document.getElementById('category-cards-container');
        const mainHeader = document.getElementById('main-header');
        const scrollToTopBtn = document.getElementById('scroll-to-top-btn');
        

        // --- RENDER FUNCTIONS ---
        const renderPriceAndButton = (item) => {
          const hasMedium = item.price && typeof item.price.medium === 'number';
          const hasLarge = item.price && typeof item.price.large === 'number';

          if (hasMedium && hasLarge) {
            return `
              <div class="flex flex-col items-start text-sm">
                <label class="flex items-center gap-2 cursor-pointer">
                  <input type="radio" name="size-${item.id}" value="medium" checked class="form-radio text-blue-600" />
                  <span>وسط: ${item.price.medium} ج</span>
                </label>
                <label class="flex items-center gap-2 cursor-pointer">
                  <input type="radio" name="size-${item.id}" value="large" class="form-radio text-blue-600" />
                  <span>كبير: ${item.price.large} ج</span>
                </label>
              </div>
              <button data-item-id="${item.id}" class="add-to-cart-btn bg-blue-600 text-white font-bold py-2 px-3 rounded-full hover:bg-blue-700 transition-colors w-full sm:w-auto text-sm">
                أضف للسلة
              </button>
            `;
          } else if (hasMedium) {
            return `
              <div class="flex items-center">
                  <p class="text-lg font-bold text-gray-900">${item.price.medium} جنيه</p>
              </div>
              <button data-item-id="${item.id}" data-size="medium" class="add-to-cart-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-full hover:bg-blue-700 transition-colors">
                أضف للسلة
              </button>
            `;
          } else {
            return `
              <div class="flex items-center w-full">
                  <p class="text-base font-semibold text-gray-700">السعر حسب اليوم</p>
              </div>
            `;
          }
        };

        const renderMenu = () => {
          menuContainer.innerHTML = menuData.map((category, index) => `
            <section id="category-${index}" class="mb-12">
              <h2 class="text-3xl font-bold text-blue-800 border-b-4 border-blue-300 pb-2 mb-6">${category.title}</h2>
              <div class="grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4">
                ${category.items.map(item => `
                  <div class="bg-white rounded-lg shadow-md overflow-hidden transform hover:scale-105 transition-transform duration-300 flex flex-col">
                    <img src="${item.image}" alt="${item.name}" class="w-full h-32 sm:h-48 object-cover bg-gray-200 cursor-pointer" data-item-id="${item.id}" />
                    <div class="p-3 flex flex-col flex-grow">
                      <h3 class="text-base sm:text-xl font-bold text-gray-800">${item.name}</h3>
                      <p class="text-gray-600 text-sm mt-1 flex-grow">${item.description}</p>
                      <div class="mt-4 flex flex-col sm:flex-row justify-between items-center gap-2 sm:gap-4">
                        ${renderPriceAndButton(item)}
                      </div>
                    </div>
                  </div>
                `).join('')}
              </div>
            </section>
          `).join('');
        };
        
        const renderCategoryCards = () => {
            const showAllCardHTML = `
                <div data-target-id="all" class="category-card active-category bg-white border rounded-lg p-3 text-center shadow-md hover:shadow-xl hover:border-blue-500 transition-all duration-300 flex flex-col items-center justify-center cursor-pointer">
                    <h3 class="font-bold text-blue-800">عرض الكل</h3>
                </div>
            `;

            const categoryCardsHTML = menuData.map((category, index) => `
                <div data-target-id="category-${index}" class="category-card bg-white border rounded-lg p-3 text-center shadow-md hover:shadow-xl hover:border-blue-500 transition-all duration-300 flex flex-col items-center justify-center cursor-pointer">
                    <h3 class="font-bold text-sm sm:text-base text-blue-800">${category.title}</h3>
                </div>
            `).join('');

            categoryCardsContainer.innerHTML = showAllCardHTML + categoryCardsHTML;
        };

        const updateCartView = () => {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const subtotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            const isCartEmpty = cart.length === 0;
            const deliveryFee = isCartEmpty ? 0 : DELIVERY_FEE;
            const totalPrice = subtotal + deliveryFee;

            if (totalItems > 0) {
                cartItemCountSpan.textContent = totalItems;
                cartItemCountSpan.classList.remove('hidden');
            } else {
                cartItemCountSpan.classList.add('hidden');
            }
            
            cartSubtotalSpan.textContent = `${subtotal.toFixed(2)} جنيه`;
            cartDeliveryFeeSpan.textContent = `${deliveryFee.toFixed(2)} جنيه`;
            cartTotalSpan.textContent = `${totalPrice.toFixed(2)} جنيه`;
            checkoutButton.disabled = isCartEmpty;

            if (isCartEmpty) {
                cartItemsContainer.innerHTML = `<p class="text-gray-500 text-lg text-center mt-10">سلتك فارغة.</p>`;
            } else {
                cartItemsContainer.innerHTML = cart.map(item => {
                  const originalItem = findMenuItem(item.id);
                  const isSinglePrice = originalItem && originalItem.price && typeof originalItem.price.medium === 'number' && typeof originalItem.price.large !== 'number';
                  const sizeText = isSinglePrice ? '' : (item.size === 'medium' ? ' (وسط)' : ' (كبير)');
                  return `
                    <div class="flex items-center justify-between border-b pb-3 mb-3">
                        <div>
                            <h3 class="font-bold">${item.name}${sizeText}</h3>
                            <p class="text-gray-600">${item.price} جنيه</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <button data-item-id="${item.id}" data-size="${item.size}" data-change="-1" class="update-quantity-btn w-8 h-8 rounded-full border bg-gray-200">-</button>
                            <span>${item.quantity}</span>
                            <button data-item-id="${item.id}" data-size="${item.size}" data-change="1" class="update-quantity-btn w-8 h-8 rounded-full border bg-gray-200">+</button>
                        </div>
                    </div>
                  `
                }).join('');
            }
        };

        const showDetailsModal = (itemId) => {
            const item = findMenuItem(itemId);
            if (!item) return;

            detailsModalImage.src = item.image;
            detailsModalImage.alt = item.name;
            detailsModalTitle.textContent = item.name;
            detailsModalDescription.textContent = item.description;
            
            const hasMedium = item.price && typeof item.price.medium === 'number';
            const hasLarge = item.price && typeof item.price.large === 'number';

            let pricesHTML = '';
            if (hasMedium && hasLarge) {
                pricesHTML = `
                    <p><span>وسط:</span> <span class="font-bold">${item.price.medium} جنيه</span></p>
                    <p><span>كبير:</span> <span class="font-bold">${item.price.large} جنيه</span></p>
                `;
            } else if (hasMedium) {
                pricesHTML = `<p class="text-xl"><span class="font-bold">${item.price.medium} جنيه</span></p>`;
            } else {
                pricesHTML = `<p><span class="font-semibold">السعر حسب اليوم</span></p>`;
            }
            detailsModalPrices.innerHTML = pricesHTML;


            detailsModal.classList.remove('hidden');
        };

        // --- CORE LOGIC FUNCTIONS ---
        const findMenuItem = (id) => {
            for (const category of menuData) {
                const item = category.items.find(i => i.id === id);
                if (item) return item;
            }
            return null;
        };

        const smoothScrollTo = (element) => {
            if (element) {
                const headerOffset = mainHeader.offsetHeight;
                const elementPosition = element.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        };
        
        const handleAddToCart = (itemId, size) => {
            const itemData = findMenuItem(itemId);
            if (!itemData) return;
            
            const price = itemData.price[size];
            if (typeof price !== 'number') return;

            const existingItem = cart.find(cartItem => cartItem.id === itemId && cartItem.size === size);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ id: itemId, name: itemData.name, price, quantity: 1, size });
            }
            updateCartView();
        };

        const handleUpdateQuantity = (itemId, size, change) => {
            const itemIndex = cart.findIndex(cartItem => cartItem.id === itemId && cartItem.size === size);
            if (itemIndex === -1) return;
            cart[itemIndex].quantity += change;
            if (cart[itemIndex].quantity <= 0) {
                cart.splice(itemIndex, 1);
            }
            updateCartView();
        };

        const handlePlaceOrder = () => {
            let isValid = true;
            const nameInput = document.getElementById('name');
            const phoneInput = document.getElementById('phone');
            const buildingInput = document.getElementById('building');

            [nameInput, phoneInput, buildingInput].forEach(input => {
                const errorP = input.nextElementSibling;
                if (!input.value.trim()) {
                    isValid = false;
                    input.classList.add('border-red-500');
                    errorP.classList.remove('hidden');
                } else {
                    input.classList.remove('border-red-500');
                    errorP.classList.add('hidden');
                }
            });

            if (!isValid) return;

            const subtotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            const total = subtotal + DELIVERY_FEE;
            
            let orderMessage = `*طلب جديد من مطعم السماك*\n\n*العميل:* ${nameInput.value}\n*رقم التواصل:* ${phoneInput.value}\n*العنوان:* رقم العمارة/الشقة ${buildingInput.value}\n`;
            const landmarkValue = document.getElementById('landmark').value;
            if (landmarkValue) {
                orderMessage += `*علامة مميزة:* ${landmarkValue}\n`;
            }
            const deliveryTimeValue = document.getElementById('delivery-time').value;
            if (deliveryTimeValue) {
                orderMessage += `*ميعاد التوصيل:* ${deliveryTimeValue}\n`;
            }
            orderMessage += `\n*الطلبات:*\n`;
            cart.forEach(item => {
                const originalItem = findMenuItem(item.id);
                const isSinglePrice = originalItem && originalItem.price && typeof originalItem.price.medium === 'number' && typeof originalItem.price.large !== 'number';
                const sizeText = isSinglePrice ? '' : (item.size === 'medium' ? ' (وسط)' : ' (كبير)');
                orderMessage += `- ${item.name}${sizeText} (الكمية: ${item.quantity}) - ${item.price * item.quantity} جنيه\n`;
            });
            
            orderMessage += `\n*المجموع الفرعي: ${subtotal.toFixed(2)} جنيه*`;
            orderMessage += `\n*رسوم التوصيل: ${DELIVERY_FEE.toFixed(2)} جنيه*`;
            orderMessage += `\n*الإجمالي النهائي: ${total.toFixed(2)} جنيه*`;


            const whatsappNumber = "201030566078";
            const encodedMessage = encodeURIComponent(orderMessage);
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;

            checkoutModal.classList.add('hidden');
            confirmationModal.classList.remove('hidden');
            cart = [];
            updateCartView();
            checkoutForm.reset();
            window.open(whatsappUrl, '_blank');
        };
        
        // --- EVENT LISTENERS ---
        menuContainer.addEventListener('click', (e) => {
            const button = e.target.closest('.add-to-cart-btn');
            const image = e.target.closest('img[data-item-id]');

            if (button && !button.disabled) {
                const itemId = parseInt(button.dataset.itemId);
                let selectedSize = button.dataset.size;
                if (!selectedSize) {
                    const card = button.closest('.bg-white');
                    selectedSize = card.querySelector(`input[name="size-${itemId}"]:checked`).value;
                }
                
                handleAddToCart(itemId, selectedSize);
                
                const originalText = button.innerHTML;
                button.disabled = true;
                button.classList.replace('bg-blue-600', 'bg-green-600');
                button.classList.add('cursor-not-allowed');
                button.innerHTML = `<svg class="w-5 h-5 inline-block -mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> تم`;
                const cartIcon = document.getElementById('floating-cart-button');
                cartIcon.classList.add('cart-pop');
                cartIcon.addEventListener('animationend', () => cartIcon.classList.remove('cart-pop'), { once: true });
                setTimeout(() => {
                    button.disabled = false;
                    button.classList.replace('bg-green-600', 'bg-blue-600');
                    button.classList.remove('cursor-not-allowed');
                    button.innerHTML = originalText;
                }, 1500);
            } else if (image) {
                const itemId = parseInt(image.dataset.itemId);
                showDetailsModal(itemId);
            }
        });
        
        cartItemsContainer.addEventListener('click', (e) => {
            const button = e.target.closest('.update-quantity-btn');
            if (button) {
                const itemId = parseInt(button.dataset.itemId);
                const size = button.dataset.size;
                const change = parseInt(button.dataset.change);
                handleUpdateQuantity(itemId, size, change);
            }
        });

        categoryCardsContainer.addEventListener('click', (e) => {
            const card = e.target.closest('.category-card');
            if (!card) return;

            const targetId = card.dataset.targetId;
            const menuSections = menuContainer.querySelectorAll('section[id^="category-"]');

            // Update active state for category cards
            categoryCardsContainer.querySelectorAll('.category-card').forEach(c => c.classList.remove('active-category'));
            card.classList.add('active-category');

            // Filter visibility of menu sections
            let firstVisibleSection = null;
            menuSections.forEach(section => {
                const isVisible = (targetId === 'all' || section.id === targetId);
                section.style.display = isVisible ? 'block' : 'none';
                if (isVisible && !firstVisibleSection) {
                    firstVisibleSection = section;
                }
            });

            // Scroll to the top of the menu container or the first visible section
            const elementToScrollTo = (targetId === 'all') ? document.getElementById('best-dishes') : firstVisibleSection;
            if (elementToScrollTo) {
                smoothScrollTo(elementToScrollTo);
            }
        });


        floatingCartButton.addEventListener('click', () => cartSidebar.classList.remove('hidden'));
        cartCloseButton.addEventListener('click', () => cartSidebar.classList.add('hidden'));
        cartSidebar.addEventListener('click', (e) => { if(e.target === cartSidebar) cartSidebar.classList.add('hidden'); });
        checkoutButton.addEventListener('click', () => { cartSidebar.classList.add('hidden'); checkoutModal.classList.remove('hidden'); });
        checkoutForm.addEventListener('submit', (e) => { e.preventDefault(); handlePlaceOrder(); });
        checkoutCancelButton.addEventListener('click', () => checkoutModal.classList.add('hidden'));
        checkoutModal.addEventListener('click', (e) => { if(e.target === checkoutModal) checkoutModal.classList.add('hidden'); });
        confirmationCloseButton.addEventListener('click', () => confirmationModal.classList.add('hidden'));
        confirmationModal.addEventListener('click', (e) => { if(e.target === confirmationModal) confirmationModal.classList.add('hidden'); });
        
        const closeDetailsModal = () => detailsModal.classList.add('hidden');
        detailsCloseButton.addEventListener('click', closeDetailsModal);
        detailsModal.addEventListener('click', (e) => {
            if (e.target === detailsModal) {
                closeDetailsModal();
            }
        });
        
        // Scroll to top logic
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                scrollToTopBtn.classList.remove('hidden');
            } else {
                scrollToTopBtn.classList.add('hidden');
            }
        });
        
        scrollToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // --- INITIALIZATION ---
        renderMenu();
        renderCategoryCards();
        updateCartView();

      });
    </script>
  </body>
</html>
